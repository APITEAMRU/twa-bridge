"use strict";var e=require("solid-js");const t=e=>{},s="web",p="phone",o="desktop",r=(e,t)=>{const r=new URLSearchParams(window.location.hash.slice(1)).get("tgWebAppVersion");return Number(r)>=e&&-1!==t.indexOf((()=>{const e=window.location.hash.slice(1),t=new URLSearchParams(e).get("tgWebAppPlatform")??"ios";return["android","ios"].includes(t)?p:["tdesktop","macos"].includes(t)?o:s})())},a="web_app_close",n=()=>r(0,[s,o,p]);var u=(e,t)=>{window.TelegramWebviewProxy?window.TelegramWebviewProxy.postEvent(e,JSON.stringify(t)):window.external&&"notify"in window.external&&window.external.notify(JSON.stringify({eventType:e,eventData:t}))};const i="web_app_close_scan_qr_popup",_=()=>d()?(u(i),{status:!0}):{status:"not_supported"},d=()=>r(6.4,[p]),c="web_app_data_send",l=()=>r(0,[s,o,p]),x="web_app_expand",b=()=>r(0,[p]),g="iframe_ready",w=()=>r(0,[s]),h="iframe_will_reload",m=()=>r(0,[s]),f="web_app_invoke_custom_method",v=()=>r(6.9,[s,o,p]),S="web_app_open_invoice",y=()=>r(6.1,[s,o,p]),k="web_app_open_link",q=()=>r(6.4,[s,o,p]),P="web_app_open_popup",R=()=>r(6.2,[s,o,p]),O="web_app_open_scan_qr_popup",T=()=>r(6.4,[p]),C="web_app_open_tg_link",B=()=>r(7,[s,o,p]),I="web_app_read_text_from_clipboard",W=()=>r(6.4,[s,o,p]),E="web_app_ready",L=()=>r(6.9,[s,o,p]),D="web_app_request_phone",G=()=>r(6.9,[s,o,p]),M="web_app_request_theme",Q=()=>r(0,[s,o,p]),A="web_app_request_viewport",H=()=>r(0,[s,o,p]),N="web_app_request_write_access",V=()=>r(6.9,[s,o,p]),F="web_app_set_background_color",U=()=>r(6.1,[s,o,p]),J="web_app_set_header_color",j=()=>r(6.1,[s,o,p]),$="web_app_setup_back_button",z=()=>r(6.1,[s,o,p]),K="web_app_setup_closing_behavior",X=()=>r(0,[s,o,p]),Y="web_app_setup_main_button",Z=()=>r(0,[s,o,p]),ee="web_app_setup_settings_button",te=()=>r(6.1,[s,o,p]),se="web_app_switch_inline_query",pe=()=>r(6.7,[s,o,p]),oe="web_app_trigger_haptic_feedback",re=()=>r(6.1,[p]),ae=((e=new Map)=>({once:(t,s,p=e.get(t),o=(e=>{s(e),p&&p.splice(p.indexOf(s)>>>0,1)}))=>p?p.push(o):e.set(t,[o]),on:(t,s,p=e.get(t))=>p?p.push(s):e.set(t,[s]),off:(t,s,p=e.get(t))=>p&&s?p.splice(p.indexOf(s)>>>0,1):e.set(t,[]),emit:(t,s,p=e.get(t)||[])=>{for(const e of p)e(s)}}))(),ne=()=>{function e(e,t){ae.emit(e,t),ae.emit("*",{name:e,data:t})}window.TelegramGameProxy_receiveEvent=e,window.Telegram={WebView:{receiveEvent:e}},window.TelegramGameProxy={receiveEvent:e}};ne();const ue=(e,t)=>{ae.on(e,t)},ie=(e,t)=>{ae.off(e,t)},_e=(e,t)=>{ae.once(e,t)};var de=Object.freeze({__proto__:null,listenerStart:ne,off:ie,on:ue,once:_e});exports.TG_DESKTOP=o,exports.TG_PHONE=p,exports.TG_WEB=s,exports.bridgeClose=()=>n()?(u(a),{status:!0}):{status:"not_supported"},exports.bridgeCloseScanQrPopup=_,exports.bridgeDataSend=e=>l()?(u(c,e),{status:!0}):{status:"not_supported"},exports.bridgeExpand=()=>b()?(u(x),{status:!0}):{status:"not_supported"},exports.bridgeGetInitData=()=>{const e=new URLSearchParams(window.location.hash.slice(1)).get("tgWebAppData");if(null===e)return null;const t=new URLSearchParams(e);let s={};return t.forEach(((e,t)=>{if(s[t]=e,void 0!==t.match(/^(chat|receiver|user)$/g))try{s[t]=JSON.parse(e)}catch{}})),s},exports.bridgeIframeReady=e=>w()?(u(g,e),{status:!0}):{status:"not_supported"},exports.bridgeIframeWillReload=()=>m()?(u(h),{status:!0}):{status:"not_supported"},exports.bridgeInvokeCustomMethod=e=>v()?(u(f,e),{status:!0}):{status:"not_supported"},exports.bridgeOpenInvoice=e=>y()?(u(S,e),{status:!0}):{status:"not_supported"},exports.bridgeOpenLink=e=>q()?(u(k,e),{status:!0}):{status:"not_supported"},exports.bridgeOpenPopup=e=>R()?(e.title.length,e.message.length,e.message.length,e.buttons.length,e.buttons.length,e.buttons.find((e=>e.text?.match(/^(ok|close|cancel)$/g))),u(P,e),{status:!0}):{status:"not_supported"},exports.bridgeOpenScanQrPopup=async e=>T()?(u(O,e),new Promise(((t,s)=>{_e("qr_text_received",(s=>{e.is_close&&_(),t({status:!0,data:s})})),_e("scan_qr_popup_closed",(()=>{t({status:"closed",data:{data:void 0}})}))}))):{status:"not_supported",data:{data:void 0}},exports.bridgeOpenTgLink=e=>("/"!==e.path_full[0]&&(e.path_full="/"+e.path_full),B()?(u(C,e),{status:!0}):{status:"not_supported"}),exports.bridgeReadTextFromClipboard=e=>W()?(u(I,e),{status:!0}):{status:"not_supported"},exports.bridgeReady=()=>L()?(u(E),{status:!0}):{status:"not_supported"},exports.bridgeRequestPhone=async()=>G()?(u(D),new Promise(((e,t)=>{_e("phone_requested",(t=>{"sent"===t.status&&e({status:!0}),e({status:!1})}))}))):{status:"not_supported"},exports.bridgeRequestTheme=()=>Q()?(u(M),{status:!0}):{status:"not_supported"},exports.bridgeRequestViewport=()=>H()?(u(A),{status:!0}):{status:"not_supported"},exports.bridgeRequestWriteAccess=()=>V()?(u(N),{status:!0}):{status:"not_supported"},exports.bridgeSetBackgroundColor=e=>U()?(u(F,e),{status:!0}):{status:"not_supported"},exports.bridgeSetHeaderColor=e=>j()?(u(J,e),{status:!0}):{status:"not_supported"},exports.bridgeSetupBackButton=e=>z()?(u($,e),{status:!0}):{status:"not_supported"},exports.bridgeSetupClosingBehavior=e=>X()?(u(K,e),{status:!0}):{status:"not_supported"},exports.bridgeSetupMainButton=e=>Z()?(u(Y,e),{status:!0}):{status:"not_supported"},exports.bridgeSetupSettingsButton=e=>te()?(u(ee,e),{status:!0}):{status:"not_supported"},exports.bridgeSwitchInlineQuery=e=>pe()?(e.query.length,u(se,e),{status:!0}):{status:"not_supported"},exports.bridgeTriggerHapticFeedback=e=>re()?(u(oe,e),{status:!0}):{status:"not_supported"},exports.createIsViewportChanged=()=>{const[t,s]=e.createSignal({height:0,is_expanded:!1,is_state_stable:!1}),p=e=>s(e);return e.onMount((()=>{ue("viewport_changed",p),u("web_app_request_viewport")})),e.onCleanup((()=>{ie("viewport_changed",p)})),t},exports.debug=t,exports.listener=de,exports.sender=u,exports.supportClose=n,exports.supportCloseScanQrPopup=d,exports.supportDataSend=l,exports.supportExpand=b,exports.supportIframeReady=w,exports.supportIframeWillReload=m,exports.supportInvokeCustomMethod=v,exports.supportOpenInvoice=y,exports.supportOpenLink=q,exports.supportOpenPopup=R,exports.supportOpenScanQrPopup=T,exports.supportOpenTgLink=B,exports.supportReadTextFromClipboard=W,exports.supportReady=L,exports.supportRequestPhone=G,exports.supportRequestTheme=Q,exports.supportRequestViewport=H,exports.supportRequestWriteAccess=V,exports.supportSetBackgroundColor=U,exports.supportSetHeaderColor=j,exports.supportSetupBackButton=z,exports.supportSetupClosingBehavior=X,exports.supportSetupMainButton=Z,exports.supportSetupSettingsButton=te,exports.supportSwitchInlineQuery=pe,exports.supportTriggerHapticFeedback=re;
