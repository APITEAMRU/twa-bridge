"use strict";var e=require("sender"),t=require("solid"),s=require("solid-js");const p=e=>{},o="web",r="phone",a="desktop",n=(e,t)=>{const s=new URLSearchParams(window.location.hash.slice(1)).get("tgWebAppVersion");return Number(s)>=e&&-1!==t.indexOf((()=>{const e=window.location.hash.slice(1),t=new URLSearchParams(e).get("tgWebAppPlatform")??"ios";return["android","ios"].includes(t)?r:["tdesktop","macos"].includes(t)?a:o})())},u="web_app_close",i=()=>n(0,[o,a,r]);var _=(e,t)=>{window.TelegramWebviewProxy?window.TelegramWebviewProxy.postEvent(e,JSON.stringify(t)):window.external&&"notify"in window.external&&window.external.notify(JSON.stringify({eventType:e,eventData:t}))};const d="web_app_close_scan_qr_popup",c=()=>l()?(_(d),{status:!0}):{status:"not_supported"},l=()=>n(6.4,[r]),x="web_app_data_send",b=()=>n(0,[o,a,r]),g="web_app_expand",w=()=>n(0,[r]),h="iframe_ready",m=()=>n(0,[o]),f="iframe_will_reload",v=()=>n(0,[o]),S="web_app_invoke_custom_method",q=()=>n(6.9,[o,a,r]),y="web_app_open_invoice",k=()=>n(6.1,[o,a,r]),P="web_app_open_link",R=()=>n(6.4,[o,a,r]),O="web_app_open_popup",T=()=>n(6.2,[o,a,r]),C="web_app_open_scan_qr_popup",B=()=>n(6.4,[r]),I="web_app_open_tg_link",W=()=>n(7,[o,a,r]),E="web_app_read_text_from_clipboard",L=()=>n(6.4,[o,a,r]),D="web_app_ready",G=()=>n(6.9,[o,a,r]),M="web_app_request_phone",Q=()=>n(6.9,[o,a,r]),A="web_app_request_theme",H=()=>n(0,[o,a,r]),N="web_app_request_viewport",V=()=>n(0,[o,a,r]),F="web_app_request_write_access",U=()=>n(6.9,[o,a,r]),J="web_app_set_background_color",j=()=>n(6.1,[o,a,r]),$="web_app_set_header_color",z=()=>n(6.1,[o,a,r]),K="web_app_setup_back_button",X=()=>n(6.1,[o,a,r]),Y="web_app_setup_closing_behavior",Z=()=>n(0,[o,a,r]),ee="web_app_setup_main_button",te=()=>n(0,[o,a,r]),se="web_app_setup_settings_button",pe=()=>n(6.1,[o,a,r]),oe="web_app_switch_inline_query",re=()=>n(6.7,[o,a,r]),ae="web_app_trigger_haptic_feedback",ne=()=>n(6.1,[r]),ue=((e=new Map)=>({once:(t,s,p=e.get(t),o=(e=>{s(e),p&&p.splice(p.indexOf(s)>>>0,1)}))=>p?p.push(o):e.set(t,[o]),on:(t,s,p=e.get(t))=>p?p.push(s):e.set(t,[s]),off:(t,s,p=e.get(t))=>p&&s?p.splice(p.indexOf(s)>>>0,1):e.set(t,[]),emit:(t,s,p=e.get(t)||[])=>{for(const e of p)e(s)}}))(),ie=()=>{function e(e,t){ue.emit(e,t),ue.emit("*",{name:e,data:t})}window.TelegramGameProxy_receiveEvent=e,window.Telegram={WebView:{receiveEvent:e}},window.TelegramGameProxy={receiveEvent:e}};ie();const _e=(e,t)=>{ue.once(e,t)};var de=Object.freeze({__proto__:null,listenerStart:ie,off:(e,t)=>{ue.off(e,t)},on:(e,t)=>{ue.on(e,t)},once:_e});exports.TG_DESKTOP=a,exports.TG_PHONE=r,exports.TG_WEB=o,exports.bridgeClose=()=>i()?(_(u),{status:!0}):{status:"not_supported"},exports.bridgeCloseScanQrPopup=c,exports.bridgeDataSend=e=>b()?(_(x,e),{status:!0}):{status:"not_supported"},exports.bridgeExpand=()=>w()?(_(g),{status:!0}):{status:"not_supported"},exports.bridgeGetInitData=()=>{const e=new URLSearchParams(window.location.hash.slice(1)).get("tgWebAppData");if(null===e)return null;const t=new URLSearchParams(e);let s={};return t.forEach(((e,t)=>{if(s[t]=e,void 0!==t.match(/^(chat|receiver|user)$/g))try{s[t]=JSON.parse(e)}catch{}})),s},exports.bridgeIframeReady=e=>m()?(_(h,e),{status:!0}):{status:"not_supported"},exports.bridgeIframeWillReload=()=>v()?(_(f),{status:!0}):{status:"not_supported"},exports.bridgeInvokeCustomMethod=e=>q()?(_(S,e),{status:!0}):{status:"not_supported"},exports.bridgeOpenInvoice=e=>k()?(_(y,e),{status:!0}):{status:"not_supported"},exports.bridgeOpenLink=e=>R()?(_(P,e),{status:!0}):{status:"not_supported"},exports.bridgeOpenPopup=e=>T()?(e.title.length,e.message.length,e.message.length,e.buttons.length,e.buttons.length,e.buttons.find((e=>e.text?.match(/^(ok|close|cancel)$/g))),_(O,e),{status:!0}):{status:"not_supported"},exports.bridgeOpenScanQrPopup=async e=>B()?(_(C,e),new Promise(((t,s)=>{_e("qr_text_received",(s=>{e.is_close&&c(),t({status:!0,data:s})})),_e("scan_qr_popup_closed",(()=>{t({status:"closed",data:{data:void 0}})}))}))):{status:"not_supported",data:{data:void 0}},exports.bridgeOpenTgLink=e=>("/"!==e.path_full[0]&&(e.path_full="/"+e.path_full),W()?(_(I,e),{status:!0}):{status:"not_supported"}),exports.bridgeReadTextFromClipboard=e=>L()?(_(E,e),{status:!0}):{status:"not_supported"},exports.bridgeReady=()=>G()?(_(D),{status:!0}):{status:"not_supported"},exports.bridgeRequestPhone=async()=>Q()?(_(M),new Promise(((e,t)=>{_e("phone_requested",(t=>{"sent"===t.status&&e({status:!0}),e({status:!1})}))}))):{status:"not_supported"},exports.bridgeRequestTheme=()=>H()?(_(A),{status:!0}):{status:"not_supported"},exports.bridgeRequestViewport=()=>V()?(_(N),{status:!0}):{status:"not_supported"},exports.bridgeRequestWriteAccess=()=>U()?(_(F),{status:!0}):{status:"not_supported"},exports.bridgeSetBackgroundColor=e=>j()?(_(J,e),{status:!0}):{status:"not_supported"},exports.bridgeSetHeaderColor=e=>z()?(_($,e),{status:!0}):{status:"not_supported"},exports.bridgeSetupBackButton=e=>X()?(_(K,e),{status:!0}):{status:"not_supported"},exports.bridgeSetupClosingBehavior=e=>Z()?(_(Y,e),{status:!0}):{status:"not_supported"},exports.bridgeSetupMainButton=e=>te()?(_(ee,e),{status:!0}):{status:"not_supported"},exports.bridgeSetupSettingsButton=e=>pe()?(_(se,e),{status:!0}):{status:"not_supported"},exports.bridgeSwitchInlineQuery=e=>re()?(e.query.length,_(oe,e),{status:!0}):{status:"not_supported"},exports.bridgeTriggerHapticFeedback=e=>ne()?(_(ae,e),{status:!0}):{status:"not_supported"},exports.createIsViewportChanged=()=>{const[p,o]=s.createSignal({height:0,is_expanded:!1,is_state_stable:!1}),r=e=>o(e);return s.onMount((()=>{t.listener.on("viewport_changed",r),e("web_app_request_viewport")})),s.onCleanup((()=>{t.listener.off("viewport_changed",r)})),p},exports.debug=p,exports.listener=de,exports.sender=_,exports.supportClose=i,exports.supportCloseScanQrPopup=l,exports.supportDataSend=b,exports.supportExpand=w,exports.supportIframeReady=m,exports.supportIframeWillReload=v,exports.supportInvokeCustomMethod=q,exports.supportOpenInvoice=k,exports.supportOpenLink=R,exports.supportOpenPopup=T,exports.supportOpenScanQrPopup=B,exports.supportOpenTgLink=W,exports.supportReadTextFromClipboard=L,exports.supportReady=G,exports.supportRequestPhone=Q,exports.supportRequestTheme=H,exports.supportRequestViewport=V,exports.supportRequestWriteAccess=U,exports.supportSetBackgroundColor=j,exports.supportSetHeaderColor=z,exports.supportSetupBackButton=X,exports.supportSetupClosingBehavior=Z,exports.supportSetupMainButton=te,exports.supportSetupSettingsButton=pe,exports.supportSwitchInlineQuery=re,exports.supportTriggerHapticFeedback=ne;
