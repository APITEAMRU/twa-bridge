const e="web",t="phone",s="desktop",a="not_supported",r=(a,r)=>{const o=new URLSearchParams(window.location.hash.slice(1)).get("tgWebAppVersion");return Number(o)>=a&&-1!==r.indexOf((()=>{const a=window.location.hash.slice(1),r=new URLSearchParams(a).get("tgWebAppPlatform")??"ios";return["android","ios"].includes(r)?t:["tdesktop","macos"].includes(r)?s:e})())},o=()=>Math.random().toString(36).substring(3,9),n=e=>{var t;if(t=/^\s*#([0-9a-f]{6})\s*$/i.exec(e+=""))return"#"+t[1].toLowerCase();if(t=/^\s*#([0-9a-f])([0-9a-f])([0-9a-f])\s*$/i.exec(e))return("#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]).toLowerCase();if(t=/^\s*rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+\.{0,1}\d*))?\)\s*$/.exec(e)){var s=parseInt(t[1]),a=parseInt(t[2]),r=parseInt(t[3]);return"#"+((s<16?"0":"")+s.toString(16))+((a<16?"0":"")+a.toString(16))+((r<16?"0":"")+r.toString(16))}return!1},i=()=>_()?(_e(We),{status:!0}):(ne(We,1),{status:a}),_=()=>r(0,[e,s,t]),p=()=>u()?(_e(Ee),{status:!0}):(ne(Ee,1),{status:a}),u=()=>r(6.4,[t]),d=e=>c()?(_e(Ne,e),{status:!0}):(ne(Ne,1),{status:a}),c=()=>r(0,[e,s,t]),b=()=>g()?(_e($e),{status:!0}):(ne($e,1),{status:a}),g=()=>r(0,[t]),l=e=>w()?(_e(Be,e),{status:!0}):(ne(Be,1),{status:a}),w=()=>r(0,[e]),m=()=>h()?(_e(Be),{status:!0}):(ne(Be,1),{status:a}),h=()=>r(0,[e]),f="web_app_invoke_custom_method",v=async e=>y()?(void 0===e.req_id&&(e.req_id=o()),_e(f,e),new Promise(((t,s)=>{const a=s=>{s.req_id===e.req_id&&(t({status:!0,data:s}),ke(de,a))};Pe(de,a)}))):(ne(f,1),{status:a}),y=()=>r(6.9,[e,s,t]),q=e=>S()?(_e(Ae,e),{status:!0}):(ne(Ae,1),{status:a}),S=()=>r(6.1,[e,s,t]),x=e=>P()?(_e(Ue,e),{status:!0}):(ne(Ue,1),{status:a}),P=()=>r(6.4,[e,s,t]),k=async e=>O()?(e.title.length>64&&ne(Je,3),e.message.length<1&&ne(Je,4),e.message.length>256&&ne(Je,5),e.buttons.length<1&&ne(Je,6),e.buttons.length>3&&ne(Je,7),void 0!==e.buttons.find((e=>e.text?.match(/^(ok|close|cancel)$/g)))&&ne(Je,8),_e(Je,e),new Promise(((t,s)=>{const a=s=>{t({status:!!e.buttons.find((e=>e.id===s?.button_id)),data:s}),ke(le,a)};Pe(le,a)}))):(ne(Je,1),{status:a}),O=()=>r(6.2,[e,s,t]),R=async e=>T()?(_e(Ie,e),new Promise(((t,s)=>{Oe(me,(s=>{e.is_close&&p(),t({status:!0,data:s})})),Oe(he,(()=>{t({status:"closed"})}))}))):(ne(Ie,1),{status:a}),T=()=>r(6.4,[t]),I=e=>("/"!==e.path_full[0]&&(e.path_full="/"+e.path_full),C()?(_e(Me,e),{status:!0}):(ne(Me,1),{status:a})),C=()=>r(7,[e,s,t]),L=async e=>W()?(void 0===e.req_id&&(e.req_id=o()),_e(Ce,e),new Promise(((t,s)=>{const a=s=>{s.req_id===e.req_id&&(t({status:!0,data:s}),ke(ue,a))};Pe(ue,a)}))):(ne(Ce,1),{status:a}),W=()=>r(6.4,[e,s,t]),E=()=>N()?(_e(Ve),{status:!0}):(ne(Ve,1),{status:a}),N=()=>r(6.9,[e,s,t]),$=async()=>B()?(_e(Le),new Promise(((e,t)=>{Oe(ge,(t=>{"sent"===t.status&&e({status:!0}),e({status:!1})}))}))):(ne(Le,1),{status:a}),B=()=>r(6.9,[e,s,t]),D=()=>A()?(_e(Ge),{status:!0}):(ne(Ge,1),{status:a}),A=()=>r(0,[e,s,t]),U=()=>J()?(_e(Qe),{status:!0}):(ne(Qe,1),{status:a}),J=()=>r(0,[e,s,t]),M=()=>V()?(_e(Fe),{status:!0}):(ne(Fe,1),{status:a}),V=()=>r(6.9,[e,s,t]),G=e=>Q()?(_e(He,e),{status:!0}):(ne(He,1),{status:a}),Q=()=>r(6.1,[e,s,t]),F=e=>H()?(_e(je,e),{status:!0}):(ne(je,1),{status:a}),H=()=>r(6.1,[e,s,t]),j=e=>z()?(_e(ze,e),{status:!0}):(ne(ze,1),{status:a}),z=()=>r(6.1,[e,s,t]),K=e=>X()?(_e(Ke,e),{status:!0}):(ne(Ke,1),{status:a}),X=()=>r(0,[e,s,t]),Y=e=>Z()?(_e(Xe,e),{status:!0}):(ne(Xe,1),{status:a}),Z=()=>r(0,[e,s,t]),ee=e=>te()?(_e(Ye,e),{status:!0}):(ne(Ye,1),{status:a}),te=()=>r(6.1,[e,s,t]),se=e=>ae()?(e.query.length>256&&ne(Ze,9),_e(Ze,e),{status:!0}):(ne(Ze,1),{status:a}),ae=()=>r(6.7,[e,s,t]),re=e=>oe()?(_e(et,e),{status:!0}):(ne(et,1),{status:a}),oe=()=>r(6.1,[t]);var ne=(e,t)=>{"development"===process.env.NODE_ENV&&console.error(`[@apiteam/twa-bridge](${e}) = ${t}`)};const ie=()=>{const e=new URLSearchParams(window.location.hash.slice(1)).get("tgWebAppData");if(null===e)return ne("getInitData",2),null;const t=new URLSearchParams(e);let s={};return t.forEach(((e,t)=>{if(s[t]=e,void 0!==t.match(/^(chat|receiver|user)$/g))try{s[t]=JSON.parse(e)}catch{}})),s};var _e=(e,t)=>{window.TelegramWebviewProxy?window.TelegramWebviewProxy.postEvent(e,JSON.stringify(t)):window.external&&"notify"in window.external&&window.external.notify(JSON.stringify({eventType:e,eventData:t}))};const pe="back_button_pressed",ue="clipboard_text_received",de="custom_method_invoked",ce="invoice_closed",be="main_button_pressed",ge="phone_requested",le="popup_closed",we="reload_iframe",me="qr_text_received",he="scan_qr_popup_closed",fe="set_custom_style",ve="settings_button_pressed",ye="theme_changed",qe="viewport_changed",Se="write_access_requested",xe=((e=new Map)=>({once:(t,s,a=e.get(t),r=(e=>{s(e),a&&a.splice(a.indexOf(s)>>>0,1)}))=>a?a.push(r):e.set(t,[r]),on:(t,s,a=e.get(t))=>a?a.push(s):e.set(t,[s]),off:(t,s,a=e.get(t))=>a&&s?a.splice(a.indexOf(s)>>>0,1):e.set(t,[]),emit:(t,s,a=e.get(t)||[])=>{for(const e of a)e(s)}}))();(()=>{function e(e,t){e===ye&&(t.theme_params=(e=>{"#1c1c1d"==e.bg_color&&e.bg_color==e.secondary_bg_color&&(e.secondary_bg_color="#2c2c2e");const t=window.location.hash.slice(1),s=new URLSearchParams(t);var a=JSON.parse(s.get("tgWebAppThemeParams")??"");for(var r in e){var o=n(e[r]);"string"==typeof o&&(a[r]=o)}return a})(t.theme_params)),xe.emit(e,t),xe.emit("*",{name:e,data:t})}window.TelegramGameProxy_receiveEvent=e,window.Telegram={WebView:{receiveEvent:e}},window.TelegramGameProxy={receiveEvent:e}})();const Pe=(e,t)=>{xe.on(e,t)},ke=(e,t)=>{xe.off(e,t)},Oe=(e,t)=>{xe.once(e,t)};var Re=Object.freeze({__proto__:null,off:ke,on:Pe,once:Oe});const Te="web_app_invoke_custom_method",Ie="web_app_open_scan_qr_popup",Ce="web_app_read_text_from_clipboard",Le="web_app_request_phone",We="web_app_close",Ee="web_app_close_scan_qr_popup",Ne="web_app_data_send",$e="web_app_expand",Be="iframe_ready",De="iframe_will_reload",Ae="web_app_open_invoice",Ue="web_app_open_link",Je="web_app_open_popup",Me="web_app_open_tg_link",Ve="web_app_ready",Ge="web_app_request_theme",Qe="web_app_request_viewport",Fe="web_app_request_write_access",He="web_app_set_background_color",je="web_app_set_header_color",ze="web_app_setup_back_button",Ke="web_app_setup_closing_behavior",Xe="web_app_setup_main_button",Ye="web_app_setup_settings_button",Ze="web_app_switch_inline_query",et="web_app_trigger_haptic_feedback";export{pe as EventBackButtonPressed,ue as EventClipboardTextReceived,de as EventCustomMethodInvoked,ce as EventInvoiceClosed,be as EventMainButtonPressed,ge as EventPhoneRequested,le as EventPopupClosed,me as EventQrTextReceived,we as EventReloadIframe,he as EventScanQrPopupClosed,fe as EventSetCustomStyle,ve as EventSettingsButtonPressed,ye as EventThemeChanged,qe as EventViewportChanged,Se as EventWriteAccessRequested,We as MethodClose,Ee as MethodCloseScanQrPopup,Ne as MethodDataSend,$e as MethodExpand,Be as MethodIframeReady,De as MethodIframeWillReload,Te as MethodInvokeCustomMethod,Ae as MethodOpenInvoice,Ue as MethodOpenLink,Je as MethodOpenPopup,Ie as MethodOpenScanQrPopup,Me as MethodOpenTgLink,Ce as MethodReadTextFromClipboard,Ve as MethodReady,Le as MethodRequestPhone,Ge as MethodRequestTheme,Qe as MethodRequestViewport,Fe as MethodRequestWriteAccess,He as MethodSetBackgroundColor,je as MethodSetHeaderColor,ze as MethodSetupBackButton,Ke as MethodSetupClosingBehavior,Xe as MethodSetupMainButton,Ye as MethodSetupSettingsButton,Ze as MethodSwitchInlineQuery,et as MethodTriggerHapticFeedback,a as NOT_SUPPORTED,s as TG_DESKTOP,t as TG_PHONE,e as TG_WEB,i as bridgeClose,p as bridgeCloseScanQrPopup,d as bridgeDataSend,b as bridgeExpand,ie as bridgeGetInitData,l as bridgeIframeReady,m as bridgeIframeWillReload,v as bridgeInvokeCustomMethod,q as bridgeOpenInvoice,x as bridgeOpenLink,k as bridgeOpenPopup,R as bridgeOpenScanQrPopup,I as bridgeOpenTgLink,L as bridgeReadTextFromClipboard,E as bridgeReady,$ as bridgeRequestPhone,D as bridgeRequestTheme,U as bridgeRequestViewport,M as bridgeRequestWriteAccess,G as bridgeSetBackgroundColor,F as bridgeSetHeaderColor,j as bridgeSetupBackButton,K as bridgeSetupClosingBehavior,Y as bridgeSetupMainButton,ee as bridgeSetupSettingsButton,se as bridgeSwitchInlineQuery,re as bridgeTriggerHapticFeedback,ne as debug,Re as listener,_e as sender,_ as supportClose,u as supportCloseScanQrPopup,c as supportDataSend,g as supportExpand,w as supportIframeReady,h as supportIframeWillReload,y as supportInvokeCustomMethod,S as supportOpenInvoice,P as supportOpenLink,O as supportOpenPopup,T as supportOpenScanQrPopup,C as supportOpenTgLink,W as supportReadTextFromClipboard,N as supportReady,B as supportRequestPhone,A as supportRequestTheme,J as supportRequestViewport,V as supportRequestWriteAccess,Q as supportSetBackgroundColor,H as supportSetHeaderColor,z as supportSetupBackButton,X as supportSetupClosingBehavior,Z as supportSetupMainButton,te as supportSetupSettingsButton,ae as supportSwitchInlineQuery,oe as supportTriggerHapticFeedback};
